include header.doc
<!-- @(#) $Id$ -->

<h2>
Reference
</h2>

Java 1.4.1
PROJ.4
www.remotesensing.org

language reference
assignments
quoting
comments
control structures
procedures

+, -, *, /, .
<p>
Following built-in functions

<p>
<table cellpadding=4 border=1>
<tr>
<td>
<b>Function Name</b>
<td>
<b>Description</b>

<tr>
<td>
<a name="length"></a>
<tt>length(<i>str</i>)<tt>
<td>
Returns the length of the string <i>str</i>.

<tr>
<td>
<a name="match"></a>
<tt>match(<i>str</i>, <i>regex</i>)<tt>
<td>
Returns the index in the string <i>str</i>, where the regular expression
<i>regex</i> is first matched.  The index of the first character is 1.
If the regular expression does not match <i>str</i>, then 0 is returned.

<tr>
<td>
<a name="round"></a>
<tt>round(<i>n</i>)<tt>
<td>
Returns <i>n</i> rounded to nearest whole number.

<tr>
<td>
<a name="random"></a>
<tt>random(<i>n</i>)<tt>
<td>
Generates a random floating point number between 0 and <i>n</i>.

<tr>
<td>
<a name="substr"></a>
<tt>substr(<i>str</i>, <i>offset</i>, <i>n</i>)<tt>
<td>
Returns a substring of the string <i>str</i>, beginning at the
character with index <i>offset</i> that is <i>n</i> characters long.
The first character in <i>str</i> has an index of 1.

</table>

<p>
<table cellpadding=4 border=1>

<tr>
<td>
<b>Variable Name</b>
<td>
<b>Description</b>

<tr>
<td>
<tt>Mapyrus.dataset.fieldnames</tt>
<td>
The names of fields being imported from the current dataset,
separated by spaces.
<tr>
<td>
<tt>Mapyrus.dataset.projection</tt>
<td>
A description of the projection (coordinate system) in which coordinates
of the current dataset are stored.
Projection descriptions are not standardised between dataset formats.
Different dataset formats will return different descriptions for the same
projection.

<tr>
<td>
<tt>Mapyrus.dataset.min.x</tt>
<br>
<tt>Mapyrus.dataset.min.y</tt>
<br>
<tt>Mapyrus.dataset.max.x</tt>
<br>
<tt>Mapyrus.dataset.max.y</tt>
<td>
The bounding rectangle of all data in the current dataset.

<tr>
<td>
<tt>Mapyrus.elapsedtime</tt>
<td>
The elapsed processing time, measured in seconds.

<tr>
<td>
<tt>Mapyrus.geometry.length</tt>
<td>
The length of the current path on the page, measured in millimetres.

<tr>
<td>
<tt>Mapyrus.geometry.area</tt>
<td>
The area of the current path on the page, measured in square millimetres.

<tr>
<td>
<tt>Mapyrus.import.count</tt>
<td>
The number of rows already fetched from the current dataset.

<tr>
<td>
<tt>Mapyrus.import.moreRows</tt>
<td>
Flag value set to 1 if another row is available for <a href="#fetch">fetch</a>
command, or 0 if no more rows available.

<tr>
<td>
<tt>Mapyrus.page.height</tt>
<br>
<tt>Mapyrus.page.width</tt>
<br>
<tt>Mapyrus.page.resolution</tt>
<td>
The height, width and resolution of page that were given to
<a href="#newpage">newpage</a> command.  Height and width are
in millimetres, resolution is in dots-per-inch.

<tr>
<td>
<tt>Mapyrus.project.min.x</tt>
<br>
<tt>Mapyrus.project.min.y</tt>
<br>
<tt>Mapyrus.project.max.x</tt>
<br>
<tt>Mapyrus.project.max.y</tt>
<td>
The bounding rectangle of world coordinates, in the coordinate
system given as the source projection to the
<a href="#project">project</a> command.

<tr>
<td>
<tt>Mapyrus.rotation</tt>
<td>
The current rotation angle in degrees set by
<a href="#rotation">rotation</a> command.

<tr>
<td>
<tt>Mapyrus.scale.x</tt>
<br>
<tt>Mapyrus.scale.y</tt>
<td>
The current scale factor set by 
<a href="#scale">scale</a> command.

<tr>
<td>
<tt>Mapyrus.timestamp</tt>
<td>
A string representation of the current date and time.

<tr>
<td>
<tt>Mapyrus.version</tt>
<td>
The version of the software.

<tr>
<td>
<tt>Mapyrus.worlds.min.x</tt>
<br>
<tt>Mapyrus.worlds.min.y</tt>
<br>
<tt>Mapyrus.worlds.max.x</tt>
<br>
<tt>Mapyrus.worlds.max.y</tt>
<td>
The bounding rectangle of world coordinates set with the 
<a href="#worlds">worlds</a> command.
</table>
<p>

<hr>

<p>
<a name="color"></a>
<tt>color</tt> <i>name</i>
<br>
<tt>color "rgb"</tt>, <i>red</i>, <i>green</i>, <i>blue</i>
<br>
<tt>color "hsb"</tt>, <i>hue</i>, <i>saturation</i>, <i>brightness</i>
<p>
Sets color for drawing.
Named colors refer to colors in the file
<tt>/usr/lib/X11/rgb.txt</tt>, or the file given 
in the Java system property <tt>Mapyrus.rgbfile</tt>.
Values for RGB and HSB colors are given as intensities
in the range 0-1.

<hr>

<p>
<a name="linestyle"></a>
<tt>linestyle</tt> <i>width</i>
<br>
<tt>linestyle</tt> <i>width</i>, <i>cap</i>, <i>join</i>
<br>
<tt>linestyle</tt> <i>width</i>, <i>cap</i>, <i>join</i>,
<i>phase</i>, <i>dash length</i>, ...
<p>
Sets style line drawing by the <a href="#stroke">stroke</a>
command.
Line <i>width</i> given in millimetres.
<i>cap</i> is the style to use at the ends of lines, either
<tt>butt</tt>, <tt>round</tt> or <tt>square</tt>.
<i>join</i> is the style to use where lines join, either
<tt>bevel</tt>, <tt>miter</tt> or <tt>round</tt>.
<i>dash length</i> is the length in millimetres
of one dash in a dashed linestyle.
<i>phase</i> is the offset in millimetres into the dash pattern 
at which to begin.

<hr>

<p>
<a name="font"></a>
<tt>font</tt> <i>name</i>, <i>style</i>, <i>size</i>
<p>
Sets font for labelling with the <a href="#label">label</a> command.
Font <i>name</i>, <i>style</i> is either <tt>plain</tt>, <tt>bold</tt>,
<tt>italic</tt> or <tt>bolditalic</tt>.
Font <i>size</i> is given in millimetres.

<hr>

<p>
<a name="justify"></a>
justify <i>justification</i>
<p>
Sets justification for labelling with the <a href="#label">label</a> command.
<i>justification</i> is a string containing either
<tt>left</tt>, <tt>right</tt>, <tt>center</tt> for justifying labels
horizontally and/or
<tt>top</tt>, <tt>middle</tt>, <tt>bottom</tt> for justifying labels
vertically.

<hr>

<p>
<a name="move"></a>
MOVE
Moves the pen

<p>
<a name="draw"></a>
DRAW

<p>
<a name="arc"></a>
ARC
Circular arc

<p>
<a name="clearpath"></a>
CLEARPATH

<p>
<a name="samplepath"></a>
SAMPLEPATH
Replaces current path with equally spaced points along that path

<p>
<a name="stripepath"></a>
STRIPEPATH
Replaces current path with equally spaced line stripes

<p>
<a name="stroke"></a>
STROKE

<p>
<a name="fill"></a>
FILL
Flood fills the current path with the current color.
The path is not modified.

<p>
<a name="clip"></a>
CLIP
Protects

<p>
<a name="label"></a>
LABEL

<p>
<a name="scale"></a>
SCALE

<p>
<a name="rotate"></a>
ROTATE

<p>
<a name="worlds"></a>
WORLDS

<p>
<a name="project"></a>
PROJECT

<p>
<a name="dataset"></a>
DATASET

<p>
<a name="import"></a>
IMPORT

<p>
<a name="fetch"></a>
FETCH
Fetches next row from dataset.

<p>
<a name="newpage"></a>
NEWPAGE

<p>
<a name="print"></a>
PRINT expression, [expression]
Writes 

include footer.doc
